create table leads
(
    id INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
    name VARCHAR(100) NOT NULL ,
    contact_id INT NULL,
    invoice_id INT NULL,
    created_at TIMESTAMP NOT NULL,
    updated_at TIMESTAMP NULL,
    delivery_time TIMESTAMP NULL,
    pipeline_status INT NOT NULL ,
    user_id INT NOT NULL,
    FOREIGN KEY (user_id) REFERENCES users(id)
)engine=MyIsam charset=utf8;

CREATE table IF NOT EXISTS users
(
    id INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
    category_id INT NOT NULL,
    login VARCHAR(50) NOT NULL UNIQUE ,
    password VARCHAR(50) NOT NULL,
    FOREIGN KEY(category_id) REFERENCES users_scopes(id)  ON DELETE CASCADE
) ENGINE=MyISAM DEFAULT CHARSET = utf8;

CREATE TABLE IF NOT EXISTS users_scopes
(
    id INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
    scope VARCHAR(50) NOT NULL UNIQUE

) ENGINE=MyISAM DEFAULT CHARSET = utf8;

CREATE TABLE IF NOT EXISTS rights
(
    id INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
    type VARCHAR(100) UNIQUE NOT NULL

) ENGINE=MyISAM DEFAULT CHARSET = utf8;

CREATE TABLE IF NOT EXISTS rights_scopes
(
    id INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
    scope_id INT NOT NULL,
    right_id INT NOT NULL,
    FOREIGN KEY(scope_id) REFERENCES users_scopes(id) ON DELETE CASCADE,
    FOREIGN KEY(right_id) REFERENCES rights(id) ON DELETE CASCADE
) ENGINE=MyISAM DEFAULT CHARSET = utf8;

CREATE TABLE IF NOT EXISTS pipeline_status
(
    id INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
    status_name VARCHAR(250) UNIQUE NOT NULL

) ENGINE=MyISAM DEFAULT CHARSET = utf8;
